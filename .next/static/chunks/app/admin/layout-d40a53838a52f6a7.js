(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{3012:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.bind(r,9196)),Promise.resolve().then(r.bind(r,5202))},6046:(e,s,r)=>{"use strict";var a=r(6658);r.o(a,"notFound")&&r.d(s,{notFound:function(){return a.notFound}}),r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},5828:(e,s,r)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var r in s)Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}(s,{callServer:function(){return a.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return n.findSourceMapURL}});let a=r(9603),n=r(3355),i=r(4979).createServerReference},9196:(e,s,r)=>{"use strict";r.d(s,{default:()=>d});var a=r(5155),n=r(2115),i=r(8173),t=r.n(i),l=r(6046),o=r(8277),c=r(5202);function d(){let e=(0,l.usePathname)(),s=(0,l.useRouter)(),{user:r,loading:i,error:d,logout:m}=(0,c.A)(),[u,x]=(0,n.useState)(!1),h=s=>"/admin"===s&&"/admin"===e||"/admin"!==s&&e.startsWith(s),f=e=>{let s="inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium";return h(e)?"".concat(s," border-indigo-500 text-gray-900"):"".concat(s," border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")},g=async()=>{await m()},v=()=>{s.push("/admin/login")};return i?(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,a.jsx)("span",{className:"font-bold text-xl text-gray-800",children:"Admin Panelll"})})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-3 relative",children:(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("div",{className:"animate-pulse h-8 w-20 bg-gray-200 rounded"})})})})]})})}):d?(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,a.jsx)("span",{className:"font-bold text-xl text-gray-800",children:"Admin Panel"})})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-3 relative",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-red-600 text-sm",children:"Auth Error"}),(0,a.jsx)("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})]})})})]})})}):(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,a.jsx)(t(),{href:"/admin",className:"font-bold text-xl text-gray-800",children:"Admin Panel"})}),(0,a.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,a.jsx)(t(),{href:"/admin",className:f("/admin"),children:"Dashboard"}),(0,a.jsx)(o.A,{permissions:"view_users",children:(0,a.jsx)(t(),{href:"/admin/users",className:f("/admin/users"),children:"Users"})}),(0,a.jsx)(o.A,{permissions:"view_content",children:(0,a.jsx)(t(),{href:"/admin/content",className:f("/admin/content"),children:"Content"})}),(0,a.jsx)(o.A,{permissions:"view_categories",children:(0,a.jsx)(t(),{href:"/admin/categories",className:f("/admin/categories"),children:"Categories"})}),(0,a.jsx)(o.A,{permissions:"view_authors",children:(0,a.jsx)(t(),{href:"/admin/authors",className:f("/admin/authors"),children:"Authors"})}),(0,a.jsx)(o.A,{permissions:["view_roles","view_permissions"],children:(0,a.jsxs)("div",{className:"relative group inline-flex items-center h-full",children:[(0,a.jsx)("button",{className:f("/admin/access-control"),children:"Access Control"}),(0,a.jsxs)("div",{className:"hidden group-hover:block absolute left-0 top-full mt-0.5 w-48 bg-white rounded-md shadow-lg py-1 z-20",children:[(0,a.jsx)(o.A,{permissions:"view_roles",children:(0,a.jsx)(t(),{href:"/admin/roles",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Roles"})}),(0,a.jsx)(o.A,{permissions:"view_permissions",children:(0,a.jsx)(t(),{href:"/admin/permissions",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Permissions"})})]})]})}),(0,a.jsx)(o.A,{permissions:"manage_media",children:(0,a.jsx)(t(),{href:"/admin/media",className:f("/admin/media"),children:"Media"})})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-3 relative",children:r?(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{className:"bg-gray-100 p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none",children:[(0,a.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>x(!u),className:"flex items-center","aria-expanded":u,"aria-haspopup":"true",children:[(0,a.jsx)("img",{className:"h-8 w-8 rounded-full",src:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",alt:"User profile"}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:r?r.firstName||r.lastName?"".concat(r.firstName||""," ").concat(r.lastName||"").trim():r.email:""}),(0,a.jsx)("svg",{className:"ml-1 h-5 w-5 text-gray-400 transition-transform duration-200 ".concat(u?"transform rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 border border-gray-200",children:[(0,a.jsx)(t(),{href:"/admin/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>x(!1),children:"Your Profile"}),(0,a.jsx)("button",{onClick:g,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})]})]})]}):(0,a.jsx)("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})})]})})})}},8277:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(5155);r(2115);var n=r(5202);function i(e){let{permissions:s,type:r="any",fallback:i=null,children:t}=e,{hasPermission:l,hasAllPermissions:o,hasAnyPermissions:c,loading:d}=(0,n.A)(),m=Array.isArray(s)?s:[s];return d?null:("all"===r?o(m):c(m))?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(a.Fragment,{children:i})}},5202:(e,s,r)=>{"use strict";r.d(s,{AuthProvider:()=>c,A:()=>o});var a=r(5155),n=r(2115),i=r(5828);let t=(0,i.createServerReference)("00d4248e5cc13d9a24c27da7f63c4e748a633f8d0d",i.callServer,void 0,i.findSourceMapURL,"logout"),l=(0,n.createContext)(void 0);function o(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c(e){let{children:s}=e,[r,i]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),[d,m]=(0,n.useState)(null),u=(0,n.useCallback)(async()=>{try{m(null);let e=await fetch("/api/auth/me",{credentials:"include",cache:"no-store"});if(e.ok)return await e.json();if(401===e.status)return null;throw Error("Failed to fetch user data")}catch(e){return console.error("Failed to load user:",e),m(e instanceof Error?e.message:"Failed to load user"),null}},[]),x=(0,n.useCallback)(async()=>{i(await u())},[u]);(0,n.useEffect)(()=>{let e=!0;return(async()=>{let s=await u();e&&(i(s),c(!1))})(),()=>{e=!1}},[u]);let h=(0,n.useCallback)(e=>!!r&&(!!(r.roles.includes("ADMIN")||r.roles.includes("SUPER_ADMIN"))||r.permissions.includes(e)),[r]),f=(0,n.useCallback)(e=>e.some(e=>h(e)),[h]),g=(0,n.useCallback)(e=>e.every(e=>h(e)),[h]),v=(0,n.useCallback)(async()=>{try{m(null),await t(),i(null),window.location.href="/admin/login"}catch(e){console.error("Logout failed:",e),m(e instanceof Error?e.message:"Logout failed")}},[]),p=n.useMemo(()=>({user:r,loading:o,error:d,setUser:i,hasPermission:h,hasAnyPermissions:f,hasAllPermissions:g,logout:v,refreshUser:x}),[r,o,d,h,f,g,v,x]);return(0,a.jsx)(l.Provider,{value:p,children:s})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8173,8441,1517,7358],()=>s(3012)),_N_E=e.O()}]);