(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8261],{8282:(e,t,s)=>{Promise.resolve().then(s.bind(s,4314))},4314:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var n=s(5155),r=s(2115),i=s(6046),l=s(57),a=s(106),d=s(1567);function o(e){let{className:t}=e;return(0,n.jsx)("div",{className:(0,d.cn)("animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",t)})}function c(e){let{message:t,title:s="Error"}=e;return(0,n.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-red-800",children:s}),(0,n.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,n.jsx)("p",{children:t})})]})]})})}var u=s(5202),m=s(8173),h=s.n(m);function f(e){let{children:t,authorId:s,postId:l}=e,{user:a}=(0,u.A)();(0,i.useRouter)();let[d,o]=(0,r.useState)(!1),[c,m]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{if(!a){m(!1);return}let e=a.roles||[];if(e.includes("SUPER_ADMIN")||e.includes("EDITOR_IN_CHIEF")||e.includes("EDITORIAL")||e.includes("SENIOR_EDITOR")){o(!0),m(!1);return}if(e.includes("EDITOR")){s&&s===a.id?o(!0):o(!1),m(!1);return}o(!1),m(!1)},[a,s]),c)?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):d?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-6 rounded-md shadow-sm",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-red-800",children:"Access Denied"}),(0,n.jsxs)("div",{className:"mt-2 text-red-700",children:[(0,n.jsx)("p",{children:"You don't have permission to edit this post."}),(0,n.jsx)("p",{className:"mt-2",children:"As an Editor, you can only edit posts that you created."}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(h(),{href:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back to Content List"})})]})]})]})})}function x(){let e=(0,i.useParams)().id,[t,s]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){try{let t=await fetch("/api/admin/posts/".concat(e));if(!t.ok){if(404===t.status)throw Error("Post not found");{let e=await t.json();throw Error(e.error||"Failed to fetch post")}}let n=await t.json();s(n)}catch(e){h(e.message||"An error occurred while fetching the post")}finally{u(!1)}})()},[e]),(0,n.jsxs)("div",{className:"py-6 space-y-6",children:[(0,n.jsx)(l.default,{title:"Edit Post",description:"Update an existing post",actions:[{label:"Back to Posts",href:"/admin/content",variant:"secondary"}]}),d?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(o,{className:"h-8 w-1/3"}),(0,n.jsx)(o,{className:"h-32 w-full"}),(0,n.jsx)(o,{className:"h-64 w-full"})]}):m?(0,n.jsx)(c,{message:m}):(0,n.jsx)(f,{authorId:(null==t?void 0:t.authorId)||void 0,postId:null==t?void 0:t.id,children:(0,n.jsx)(a.default,{post:t||void 0,isEdit:!0})})]})}},1567:(e,t,s)=>{"use strict";s.d(t,{EJ:()=>a,Yq:()=>l,bT:()=>o,cn:()=>i,tr:()=>d});var n=s(3463),r=s(9795);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,n.$)(t))}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(!e)return"";let s="string"==typeof e?new Date(e):e;return isNaN(s.getTime())?"":s.toLocaleDateString(t,{year:"numeric",month:"long",day:"numeric"})}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return!e||e.length<=t?e||"":e.substring(0,t).trim()+"..."}let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",s=new Date(e);return new Intl.DateTimeFormat("ar"===t?"ar-AE":"en-US",{year:"numeric",month:"long",day:"numeric"}).format(s)},o=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name";if(!e||0===e.length)return;let r=e.find(e=>e.locale===t);if(r)return r[n];let i=e.find(e=>e.locale===s);return i?i[n]:e[0][n]}}},e=>{var t=t=>e(e.s=t);e.O(0,[8173,5565,1181,968,9154,8441,1517,7358],()=>t(8282)),_N_E=e.O()}]);