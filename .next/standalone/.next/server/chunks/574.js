exports.id=574,exports.ids=[574],exports.modules={18460:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,59607,23)),Promise.resolve().then(r.bind(r,86554)),Promise.resolve().then(r.bind(r,96758))},28188:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,28531,23)),Promise.resolve().then(r.bind(r,98950)),Promise.resolve().then(r.bind(r,20438))},20914:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},67770:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},6283:()=>{},65955:()=>{},98950:(e,s,r)=>{"use strict";r.d(s,{default:()=>c});var t=r(45512),i=r(58009),a=r(28531),n=r.n(a),l=r(79334),o=r(38447),d=r(20438);function c(){let e=(0,l.usePathname)(),s=(0,l.useRouter)(),{user:r,loading:a,error:c,logout:m}=(0,d.A)(),[h,u]=(0,i.useState)(!1),x=s=>"/admin"===s&&"/admin"===e||"/admin"!==s&&e.startsWith(s),f=e=>{let s="inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium";return x(e)?`${s} border-indigo-500 text-gray-900`:`${s} border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300`},p=async()=>{await m()},g=()=>{s.push("/admin/login")};return a?(0,t.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)("span",{className:"font-bold text-xl text-gray-800",children:"Admin Panelll"})})}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"ml-3 relative",children:(0,t.jsx)("div",{className:"flex items-center space-x-3",children:(0,t.jsx)("div",{className:"animate-pulse h-8 w-20 bg-gray-200 rounded"})})})})]})})}):c?(0,t.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)("span",{className:"font-bold text-xl text-gray-800",children:"Admin Panel"})})}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"ml-3 relative",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("span",{className:"text-red-600 text-sm",children:"Auth Error"}),(0,t.jsx)("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})]})})})]})})}):(0,t.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(n(),{href:"/admin",className:"font-bold text-xl text-gray-800",children:"Admin Panel"})}),(0,t.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[(0,t.jsx)(n(),{href:"/admin",className:f("/admin"),children:"Dashboard"}),(0,t.jsx)(o.A,{permissions:"view_users",children:(0,t.jsx)(n(),{href:"/admin/users",className:f("/admin/users"),children:"Users"})}),(0,t.jsx)(o.A,{permissions:"view_content",children:(0,t.jsx)(n(),{href:"/admin/content",className:f("/admin/content"),children:"Content"})}),(0,t.jsx)(o.A,{permissions:"view_categories",children:(0,t.jsx)(n(),{href:"/admin/categories",className:f("/admin/categories"),children:"Categories"})}),(0,t.jsx)(o.A,{permissions:"view_authors",children:(0,t.jsx)(n(),{href:"/admin/authors",className:f("/admin/authors"),children:"Authors"})}),(0,t.jsx)(o.A,{permissions:["view_roles","view_permissions"],children:(0,t.jsxs)("div",{className:"relative group inline-flex items-center h-full",children:[(0,t.jsx)("button",{className:f("/admin/access-control"),children:"Access Control"}),(0,t.jsxs)("div",{className:"hidden group-hover:block absolute left-0 top-full mt-0.5 w-48 bg-white rounded-md shadow-lg py-1 z-20",children:[(0,t.jsx)(o.A,{permissions:"view_roles",children:(0,t.jsx)(n(),{href:"/admin/roles",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Roles"})}),(0,t.jsx)(o.A,{permissions:"view_permissions",children:(0,t.jsx)(n(),{href:"/admin/permissions",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Permissions"})})]})]})}),(0,t.jsx)(o.A,{permissions:"manage_media",children:(0,t.jsx)(n(),{href:"/admin/media",className:f("/admin/media"),children:"Media"})})]})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("div",{className:"ml-3 relative",children:r?(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("button",{className:"bg-gray-100 p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none",children:[(0,t.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>u(!h),className:"flex items-center","aria-expanded":h,"aria-haspopup":"true",children:[(0,t.jsx)("img",{className:"h-8 w-8 rounded-full",src:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",alt:"User profile"}),(0,t.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:r?r.firstName||r.lastName?`${r.firstName||""} ${r.lastName||""}`.trim():r.email:""}),(0,t.jsx)("svg",{className:`ml-1 h-5 w-5 text-gray-400 transition-transform duration-200 ${h?"transform rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 border border-gray-200",children:[(0,t.jsx)(n(),{href:"/admin/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>u(!1),children:"Your Profile"}),(0,t.jsx)("button",{onClick:p,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})]})]})]}):(0,t.jsx)("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})})]})})})}},38447:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});var t=r(45512);r(58009);var i=r(20438);function a({permissions:e,type:s="any",fallback:r=null,children:a}){let{hasPermission:n,hasAllPermissions:l,hasAnyPermissions:o,loading:d}=(0,i.A)(),c=Array.isArray(e)?e:[e];return d?null:("all"===s?l(c):o(c))?(0,t.jsx)(t.Fragment,{children:a}):(0,t.jsx)(t.Fragment,{children:r})}},20438:(e,s,r)=>{"use strict";r.d(s,{AuthProvider:()=>c,A:()=>d});var t=r(45512),i=r(58009),a=r.n(i),n=r(26248);let l=(0,n.createServerReference)("00d4248e5cc13d9a24c27da7f63c4e748a633f8d0d",n.callServer,void 0,n.findSourceMapURL,"logout"),o=(0,i.createContext)(void 0);function d(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c({children:e}){let[s,r]=(0,i.useState)(null),[n,d]=(0,i.useState)(!0),[c,m]=(0,i.useState)(null),h=(0,i.useCallback)(async()=>{try{m(null);let e=await fetch("/api/auth/me",{credentials:"include",cache:"no-store"});if(e.ok)return await e.json();if(401===e.status)return null;throw Error("Failed to fetch user data")}catch(e){return console.error("Failed to load user:",e),m(e instanceof Error?e.message:"Failed to load user"),null}},[]),u=(0,i.useCallback)(async()=>{r(await h())},[h]),x=(0,i.useCallback)(e=>!!s&&(!!(s.roles.includes("ADMIN")||s.roles.includes("SUPER_ADMIN"))||s.permissions.includes(e)),[s]),f=(0,i.useCallback)(e=>e.some(e=>x(e)),[x]),p=(0,i.useCallback)(e=>e.every(e=>x(e)),[x]),g=(0,i.useCallback)(async()=>{try{m(null),await l(),r(null),window.location.href="/admin/login"}catch(e){console.error("Logout failed:",e),m(e instanceof Error?e.message:"Logout failed")}},[]),v=a().useMemo(()=>({user:s,loading:n,error:c,setUser:r,hasPermission:x,hasAnyPermissions:f,hasAllPermissions:p,logout:g,refreshUser:u}),[s,n,c,x,f,p,g,u]);return(0,t.jsx)(o.Provider,{value:v,children:e})}},90119:(e,s,r)=>{"use strict";r.d(s,{HW:()=>f,iD:()=>u,kz:()=>h,ri:()=>x});var t=r(21590);r(70376);var i=r(10267),a=r(80541),n=r(16500),l=r(42385),o=r(66193),d=r(99344);let c=process.env.JWT_ACCESS_SECRET||"your-secret-key",m=n.z.object({email:n.z.string().email(),password:n.z.string().min(6),firstName:n.z.string().optional(),lastName:n.z.string().optional()});async function h(e){try{let s={email:e.get("email"),password:e.get("password"),firstName:e.get("firstName"),lastName:e.get("lastName")},r=m.parse(s);if(await a.A.user.findUnique({where:{email:r.email}}))return{success:!1,error:"Email already registered"};let t=await i.Ay.hash(r.password,10),n=await a.A.user.create({data:{...r,password:t,roles:{create:{role:{connectOrCreate:{where:{name:"USER"},create:{name:"USER"}}}}}}}),{password:d,...h}=n,u=(0,o.sign)({id:n.id,email:n.email},c,{expiresIn:"7d"});return(await (0,l.UL)()).set("auth-token",u,{httpOnly:!0,secure:!1,sameSite:"lax",maxAge:604800,path:"/",domain:void 0}),{success:!0,user:h}}catch(e){if(e instanceof n.z.ZodError)return{success:!1,error:e};return{success:!1,error:"Registration failed"}}}async function u(e){try{let s=e.get("email"),r=e.get("password");if(!s||!r)return{success:!1,error:"Email and password are required"};let t=await a.A.user.findUnique({where:{email:s},include:{roles:{include:{role:{include:{permissions:{include:{permission:!0}}}}}}}});if(!t||!await i.Ay.compare(r,t.password))return{success:!1,error:"Invalid email or password"};let n=t.roles.map(e=>e.role.name),d=[];for(let e of t.roles)if(e.role.permissions){let s=e.role.permissions.map(e=>e.permission.name);d.push(...s)}let m=[...new Set(d)],h=(0,o.sign)({id:t.id,email:t.email,firstName:t.firstName,lastName:t.lastName,roles:n,permissions:m},c,{expiresIn:"7d"});return(await (0,l.UL)()).set("auth-token",h,{httpOnly:!0,secure:!1,sameSite:"lax",maxAge:604800,path:"/",domain:void 0}),{success:!0,user:{id:t.id,email:t.email,firstName:t.firstName,lastName:t.lastName,roles:n,permissions:m}}}catch(e){return console.error("Login error:",e),{success:!1,error:"Login failed"}}}async function x(){return(await (0,l.UL)()).set("auth-token","",{httpOnly:!0,secure:!1,sameSite:"lax",expires:new Date(0),path:"/",domain:void 0}),{success:!0}}async function f(){try{let e=await (0,l.UL)(),s=e.get("auth-token")?.value;if(!s)return null;let r=(0,o.verify)(s,c),t=await a.A.user.findUnique({where:{id:r.id},include:{roles:{include:{role:{include:{permissions:{include:{permission:!0}}}}}}}});if(!t)return null;let{password:i,...n}=t;return n}catch(e){return console.error("Get current user error:",e),null}}(0,d.D)([h,u,x,f]),(0,t.A)(h,"4050a74c93af136bf3a3faa21dd4a4d846bc6cf489",null),(0,t.A)(u,"408e655556292a0a94341763d8193fda605da02beb",null),(0,t.A)(x,"00d4248e5cc13d9a24c27da7f63c4e748a633f8d0d",null),(0,t.A)(f,"007ef74b69aebf12238ea651195ddc937e58ae17f8",null)},85798:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m,dynamic:()=>d,metadata:()=>c});var t=r(62740);r(76301);var i=r(86554),a=r(59607),n=r.n(a);function l(){let e=new Date().getFullYear();return(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 py-4",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,t.jsx)("div",{className:"mb-4 md:mb-0",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa9 ",e," Your Company. All rights reserved."]})}),(0,t.jsxs)("div",{className:"flex space-x-6",children:[(0,t.jsx)(n(),{href:"/admin/help",className:"text-sm text-gray-500 hover:text-gray-700",children:"Help Center"}),(0,t.jsx)(n(),{href:"/admin/docs",className:"text-sm text-gray-500 hover:text-gray-700",children:"Documentation"}),(0,t.jsx)(n(),{href:"/admin/privacy",className:"text-sm text-gray-500 hover:text-gray-700",children:"Privacy Policy"}),(0,t.jsx)(n(),{href:"/admin/terms",className:"text-sm text-gray-500 hover:text-gray-700",children:"Terms of Service"})]}),(0,t.jsxs)("div",{className:"mt-4 md:mt-0 flex items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500 mr-2",children:"Version 1.0.0"}),(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500",title:"System Status: Online"})]})]})})})}var o=r(96758);let d="force-dynamic",c={title:"Admin Dashboard",description:"Admin dashboard for managing the application"};function m({children:e}){return(0,t.jsx)(o.AuthProvider,{children:(0,t.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,t.jsx)(i.default,{}),(0,t.jsx)("main",{className:"flex-grow p-6",children:e}),(0,t.jsx)(l,{})]})})}},71354:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m,metadata:()=>c});var t=r(62740),i=r(22376),a=r.n(i),n=r(68726),l=r.n(n),o=r(65772),d=r.n(o);r(61135);let c={title:{template:"%s | Phoenix Press",default:"Phoenix Press - فينيقيا | Where Stories Rise"},description:"Phoenix Press delivers timely news and thoughtful analysis on the most important stories from around the world, with a focus on accuracy and integrity.",keywords:["news","phoenix press","journalism","media","articles","press","stories"],authors:[{name:"Phoenix Media Group"}],creator:"Phoenix Media Group",publisher:"Phoenix Media Group",openGraph:{type:"website",locale:"en_US",url:"https://phoenix-press.com/",siteName:"Phoenix Press",title:"Phoenix Press - Where Stories Rise",description:"Phoenix Press delivers timely news and thoughtful analysis on the most important stories from around the world.",images:[{url:"/og-image.png",width:1200,height:630,alt:"Phoenix Press - فينيقيا"}]},twitter:{card:"summary_large_image",title:"Phoenix Press - Where Stories Rise",description:"Phoenix Press delivers timely news and thoughtful analysis on the most important stories from around the world.",creator:"@PhoenixPress",images:["/twitter-image.png"]}};function m({children:e}){return(0,t.jsxs)("html",{lang:"en",children:[(0,t.jsx)("head",{children:(0,t.jsx)("link",{rel:"icon",href:"/phoenix-logo.svg",type:"image/svg+xml"})}),(0,t.jsx)("body",{className:`${a().variable} ${l().variable} ${d().variable} antialiased bg-gray-50`,children:e})]})}},86554:(e,s,r)=>{"use strict";r.d(s,{default:()=>t});let t=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\press\\\\src\\\\components\\\\admin\\\\Header.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\press\\src\\components\\admin\\Header.tsx","default")},96758:(e,s,r)=>{"use strict";r.d(s,{AuthProvider:()=>i});var t=r(46760);(0,t.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\press\\src\\contexts\\AuthContext.tsx","useAuth");let i=(0,t.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\press\\src\\contexts\\AuthContext.tsx","AuthProvider")},80541:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(96330);let i=global.prisma||new t.PrismaClient({log:["query","error","warn"]})},70440:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(88077);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},61135:()=>{}};