"use strict";exports.id=5032,exports.ids=[5032],exports.modules={69820:(e,t,s)=>{s.r(t),s.d(t,{"007ef74b69aebf12238ea651195ddc937e58ae17f8":()=>a.HW,"00d4248e5cc13d9a24c27da7f63c4e748a633f8d0d":()=>a.ri,"4050a74c93af136bf3a3faa21dd4a4d846bc6cf489":()=>a.kz,"408e655556292a0a94341763d8193fda605da02beb":()=>a.iD});var a=s(90119)},86256:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let a=s(25488)._(s(40568));function r(e,t){var s;let r={};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,a.default)({...l,modules:null==(s=l.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3400:(e,t)=>{function s(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return s}})},65771:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=s(54639);function r(e){let{reason:t,children:s}=e;throw new a.BailoutToCSRError(t)}},40568:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let a=s(45512),r=s(58009),l=s(65771),o=s(86054);function i(e){return{default:e&&"default"in e?e.default:e}}let n={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...n,...e},s=(0,r.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,n=!t.ssr||!!t.loading,c=n?r.Suspense:r.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.PreloadChunks,{moduleIds:t.modules}),(0,a.jsx)(s,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...n?{fallback:i}:{},children:u})}return c.displayName="LoadableComponent",c}},86054:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return i}});let a=s(45512),r=s(55740),l=s(29294),o=s(3400);function i(e){let{moduleIds:t}=e,s=l.workAsyncStorage.getStore();if(void 0===s)return null;let i=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files;i.push(...t)}}return 0===i.length?null:(0,a.jsx)(a.Fragment,{children:i.map(e=>{let t=s.assetPrefix+"/_next/"+(0,o.encodeURIPath)(e);return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,r.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},22511:(e,t,s)=>{s.d(t,{default:()=>d});var a=s(45512),r=s(58009),l=s.n(r),o=s(28531),i=s.n(o),n=s(38447);function d({title:e,description:t,buttonText:s,buttonHref:r,buttonPermission:o,buttonAction:d,actions:c}){let u=s&&(r||d),m=e=>{let t="ml-3 inline-flex items-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2";switch(e){case"secondary":return`${t} border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-indigo-500`;case"danger":return`${t} border-transparent bg-red-600 text-white hover:bg-red-700 focus:ring-red-500`;default:return`${t} border-transparent bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500`}},g=(0,a.jsx)("button",{onClick:d,className:m(),children:s}),h=(0,a.jsx)(i(),{href:r||"#",className:m(),children:s});return(0,a.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:e}),t&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t})]}),(0,a.jsxs)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:[u&&o?(0,a.jsx)(n.A,{permissions:o,children:r?h:g}):u&&(r?h:g),c&&c.map((e,t)=>{let s=(0,a.jsx)(l().Fragment,{children:e.href?(0,a.jsxs)(i(),{href:e.href,className:m(e.variant),children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]}):(0,a.jsxs)("button",{onClick:e.onClick,className:m(e.variant),children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]})},t);return e.permission?(0,a.jsx)(n.A,{permissions:e.permission,children:s},t):s})]})]})}},12561:(e,t,s)=>{s.d(t,{default:()=>b});var a=s(45512),r=s(58009),l=s(79334),o=s(96330),i=s(20438),n=s(86256),d=s.n(n),c=s(45103);function u({isOpen:e,onClose:t,onSelect:s,selectedId:l}){let[o,i]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),[g,h]=(0,r.useState)(""),[x,f]=(0,r.useState)("date"),[b,p]=(0,r.useState)("grid"),y=o.filter(e=>e.title?.toLowerCase().includes(g.toLowerCase())||e.altText?.toLowerCase().includes(g.toLowerCase())).sort((e,t)=>"date"===x?new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime():(e.title||"").localeCompare(t.title||""));return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-6xl h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Media Gallery"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-4 border-b flex flex-wrap gap-4 items-center",children:[(0,a.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,a.jsx)("input",{type:"text",placeholder:"Search media...",value:g,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:x,onChange:e=>f(e.target.value),className:"px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"date",children:"Sort by Date"}),(0,a.jsx)("option",{value:"name",children:"Sort by Name"})]}),(0,a.jsxs)("div",{className:"flex border rounded-md overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>p("grid"),className:`px-4 py-2 ${"grid"===b?"bg-indigo-500 text-white":"bg-white"}`,children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),(0,a.jsx)("button",{onClick:()=>p("list"),className:`px-4 py-2 ${"list"===b?"bg-indigo-500 text-white":"bg-white"}`,children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-4",children:n?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):u?(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-red-500",children:u}):0===y.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No media items found"}):"grid"===b?(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:y.map(e=>(0,a.jsxs)("div",{className:`relative aspect-square cursor-pointer group rounded-lg overflow-hidden border-2 ${l===e.id?"border-indigo-500":"border-transparent"}`,onClick:()=>s(e),children:[(0,a.jsx)(c.default,{src:e.url,alt:e.altText||"Gallery image",fill:!0,className:"object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100",children:"Select"})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2 text-sm truncate",children:e.title||"Untitled"})]},e.id))}):(0,a.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,a.jsxs)("div",{className:`flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 ${l===e.id?"border-indigo-500 bg-indigo-50":""}`,onClick:()=>s(e),children:[(0,a.jsx)("div",{className:"relative w-16 h-16 mr-4",children:(0,a.jsx)(c.default,{src:e.url,alt:e.altText||"Gallery image",fill:!0,className:"object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium",children:e.title||"Untitled"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]},e.id))})})]})}):null}function m({value:e,onChange:t,authorId:s,isEdit:r=!1}){let{user:l}=(0,i.A)();if(!l)return null;let n=s===l.id,d=e=>{switch(e){case o.PostStatus.DRAFT:return"Draft";case o.PostStatus.WAITING_APPROVAL:return"Waiting Approval";case o.PostStatus.READY_TO_PUBLISH:return"Ready to Publish";case o.PostStatus.PUBLISHED:return"Published";case o.PostStatus.UNPUBLISHED:return"Unpublished";case o.PostStatus.ARCHIVED:return"Archived";case o.PostStatus.DECLINED:return"Declined";default:return"Unknown"}},c=(()=>{let t=l.roles||[];return t.includes("SUPER_ADMIN")||t.includes("EDITOR_IN_CHIEF")||t.includes("EDITORIAL")?[{value:o.PostStatus.DRAFT,label:"Draft"},{value:o.PostStatus.WAITING_APPROVAL,label:"Waiting Approval"},{value:o.PostStatus.READY_TO_PUBLISH,label:"Ready to Publish"},{value:o.PostStatus.PUBLISHED,label:"Published"},{value:o.PostStatus.DECLINED,label:"Declined"},{value:o.PostStatus.UNPUBLISHED,label:"Unpublished"},{value:o.PostStatus.ARCHIVED,label:"Archived"}]:t.includes("SENIOR_EDITOR")?[{value:o.PostStatus.DRAFT,label:"Draft"},{value:o.PostStatus.WAITING_APPROVAL,label:"Waiting Approval"},{value:o.PostStatus.READY_TO_PUBLISH,label:"Ready to Publish"}]:t.includes("EDITOR")&&(!r||n)?[{value:o.PostStatus.DRAFT,label:"Draft"},{value:o.PostStatus.WAITING_APPROVAL,label:"Waiting Approval"}]:[{value:e,label:d(e)}]})();return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsx)("select",{id:"status",name:"status",value:e,onChange:t,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:c.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})}var g=s(78483);let h=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});var x=s(87327);let f=d()(async()=>{},{loadableGenerated:{modules:["components\\admin\\posts\\PostForm.tsx -> @/components/shared/RichTextEditor"]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"h-64 w-full bg-gray-100 animate-pulse rounded-md"})});function b({post:e,isEdit:t=!1}){let s=(0,l.useRouter)();(0,l.useSearchParams)().get("category");let{user:n}=(0,i.A)(),[d,c]=(0,r.useState)({status:o.PostStatus.DRAFT,categoryId:"",authorId:n?.id||"",postAuthorId:"",featured:!1,metaData:{},tags:[],translations:[{locale:"en",title:"",content:"",summary:"",slug:"",dir:"ltr"},{locale:"ar",title:"",content:"",summary:"",slug:"",dir:"rtl"}]}),[b,p]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[j,w]=(0,r.useState)([]),[N,k]=(0,r.useState)(null),[C,S]=(0,r.useState)(""),[P,A]=(0,r.useState)(!1),[E,L]=(0,r.useState)([]),[I,D]=(0,r.useState)(!1),[T,M]=(0,r.useState)(null),[R,F]=(0,r.useState)("en"),[O,_]=(0,r.useState)({name:"",nameArabic:""}),[U,B]=(0,r.useState)([{key:"seo_title",value:""},{key:"seo_description",value:""},{key:"seo_keywords",value:""}]),[W,$]=(0,r.useState)([]),[H,z]=(0,r.useState)([]),[G,q]=(0,r.useState)(!1),[V,J]=(0,r.useState)(!1),[Y,Z]=(0,r.useState)(null),[K,Q]=(0,r.useState)({basicInfo:!0,content:!0,media:!0,metadata:!1}),X=e=>{Q(t=>({...t,[e]:!t[e]}))},ee=e=>{k(e),S(e.nameEn),A(!1),c(t=>({...t,postAuthorId:e.id}))},et=(e,t,s)=>{c(a=>{let r=a.translations.map(a=>a.locale===e?{...a,[t]:s}:a);return{...a,translations:r}})},es=e=>{let t=d.translations.find(t=>t.locale===e);t&&t.title&&et(e,"slug",t.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-"))},ea=(e,t,s)=>{let a=[...U];a[e][t]=s,B(a)},er=e=>{let t=[...U];t.splice(e,1),B(t)},el=(e,t)=>{_(s=>({...s,[e]:t}))},eo=async()=>{if(!O.name){alert("Tag name is required");return}try{let e=await fetch("/api/admin/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!e.ok)throw Error("Failed to create tag");let t=await e.json();v([...y,t]),c(e=>({...e,tags:[...e.tags,t.id]})),_({name:"",nameArabic:""})}catch(e){console.error("Error creating tag:",e),alert("Failed to create tag. Please try again.")}},ei=async a=>{if(a.preventDefault(),!I){M(null),D(!0);try{if(!d.categoryId)throw Error("Please select a category");if(!d.postAuthorId)throw Error("Please select an author");if(d.translations.some(e=>"en"===e.locale&&!e.title))throw Error("English title is required");if(d.translations.some(e=>"en"===e.locale&&!e.content))throw Error("English content is required");let a={};U.forEach(e=>{e.key&&e.value&&(a[e.key]=e.value)});let r=H.map(e=>e.id),l={...d,authorId:d.authorId||n?.id,metaData:a,mediaIds:r},o=t&&e?`/api/admin/posts/${e.id}`:"/api/admin/posts",i=t?"PUT":"POST",c=await fetch(o,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!c.ok){let e=await c.json();throw Error(e.error||"Failed to save post")}let u=await c.json();t?e?s.push(`/admin/posts/${e.id}/edit?success=updated`):s.push("/admin/content?success=updated"):s.push(`/admin/posts/${u.id}/edit?success=created`)}catch(e){console.error("Error saving post:",e),M(e.message||"Failed to save post"),D(!1)}}};d.translations.find(e=>e.locale===R);let en=e=>{$(t=>t.filter((t,s)=>s!==e))},ed=async()=>{if(0!==W.length){q(!0),M(null);try{let s=new FormData;W.forEach(e=>{s.append("files",e)}),t&&e?.id&&(s.append("postId",e.id),console.log(`Adding images to post: ${e.id}`));let a=await fetch("/api/admin/media/upload",{method:"POST",body:s});if(!a.ok)throw Error("Failed to upload media");let r=await a.json();if(z(e=>[...e,...r]),$([]),r.length>0){let e=document.createElement("div");e.className="bg-green-50 border-l-4 border-green-400 p-4 mb-4",e.innerHTML=`
          <div class="flex">
            <div class="flex-shrink-0">
              <svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-green-700">Media uploaded successfully</p>
            </div>
          </div>
        `;let t=document.querySelector("form");t&&(t.prepend(e),setTimeout(()=>{e.remove()},3e3))}}catch(e){console.error("Error uploading media:",e),M("Failed to upload media. Please try again.")}finally{q(!1)}}},ec=async s=>{if(z(e=>e.filter(e=>e.id!==s)),Y?.id===s&&Z(null),t&&e?.id)try{(await fetch(`/api/admin/posts/${e.id}/media/${s}`,{method:"DELETE"})).ok||console.error("Failed to remove media from post")}catch(e){console.error("Error removing media from post:",e)}};return(0,a.jsxs)("form",{onSubmit:ei,className:"space-y-6",children:[T&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-4 rounded-md",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:T})})]})}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-md shadow border border-gray-200",children:[(0,a.jsxs)("button",{type:"button",className:"flex justify-between items-center w-full text-left px-2 py-3",onClick:()=>X("basicInfo"),children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),K.basicInfo?(0,a.jsx)(g.A,{className:"h-5 w-5 text-gray-500"}):(0,a.jsx)(h,{className:"h-5 w-5 text-gray-500"})]}),K.basicInfo&&(0,a.jsxs)("div",{className:"mt-4 space-y-6 border-t border-gray-200 pt-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,a.jsxs)("select",{id:"category",value:d.categoryId,onChange:e=>{c(t=>({...t,categoryId:e.target.value}))},className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),b.map(e=>(0,a.jsx)("option",{value:e.id,children:e.translations[0]?.name||"Unnamed Category"},e.id))]})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(m,{value:d.status,onChange:e=>{c(t=>({...t,status:e.target.value}))},authorId:d.authorId,isEdit:t})})]}),(0,a.jsxs)("div",{className:"mb-4 border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Author Selection"}),(0,a.jsxs)("div",{className:"relative author-dropdown-container",children:[(0,a.jsx)("label",{htmlFor:"authorSearch",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Author *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(x.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"text",id:"authorSearch",value:C,onChange:e=>{S(e.target.value),A(!0)},onFocus:()=>A(!0),className:"block w-full pl-10 px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",placeholder:"Search authors by name or country...",required:!0})]}),P&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:E.length>0?E.map(e=>(0,a.jsx)("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>ee(e),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.nameEn}),e.nameAr&&(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1",dir:"rtl",children:e.nameAr}),e.country&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["\uD83D\uDCCD ",e.country]})]}),e.avatar&&(0,a.jsx)("img",{src:e.avatar,alt:e.nameEn,className:"w-8 h-8 rounded-full ml-3"})]})},e.id)):(0,a.jsx)("div",{className:"px-4 py-3 text-gray-500 text-sm",children:"No authors found matching your search."})}),N&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-white border border-gray-200 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[N.avatar&&(0,a.jsx)("img",{src:N.avatar,alt:N.nameEn,className:"w-10 h-10 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:N.nameEn}),N.nameAr&&(0,a.jsx)("div",{className:"text-sm text-gray-600",dir:"rtl",children:N.nameAr}),N.country&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCCD ",N.country]})]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{k(null),S(""),c(e=>({...e,postAuthorId:""}))},className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),(0,a.jsx)("select",{id:"tags",name:"tags",multiple:!0,value:d.tags,onChange:e=>{let t=Array.from(e.target.selectedOptions,e=>e.value);c(e=>({...e,tags:t}))},className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white min-h-[100px]",children:y.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Hold Ctrl/Cmd to select multiple tags"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("label",{htmlFor:"new-tag",className:"block text-sm font-medium text-gray-700",children:"Create New Tag"}),(0,a.jsx)("button",{type:"button",onClick:eo,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("input",{id:"new-tag",type:"text",placeholder:"Tag name (English)",value:O.name,onChange:e=>el("name",e.target.value),className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"}),(0,a.jsx)("input",{type:"text",placeholder:"Tag name (Arabic)",value:O.nameArabic,onChange:e=>el("nameArabic",e.target.value),className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"})]})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"featured",checked:d.featured,onChange:e=>{c(t=>({...t,featured:e.target.checked}))},className:"h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,a.jsx)("label",{htmlFor:"featured",className:"ml-2 block text-sm text-gray-700",children:"Featured Post (will appear in featured sections)"})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-md shadow border border-gray-200",children:[(0,a.jsxs)("button",{type:"button",className:"flex justify-between items-center w-full text-left px-2 py-3",onClick:()=>X("content"),children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Content"}),K.content?(0,a.jsx)(g.A,{className:"h-5 w-5 text-gray-500"}):(0,a.jsx)(h,{className:"h-5 w-5 text-gray-500"})]}),K.content&&(0,a.jsxs)("div",{className:"mt-4 space-y-6 border-t border-gray-200 pt-4",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex",children:d.translations.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>F(e.locale),className:`${R===e.locale?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} px-4 py-2 text-sm font-medium border-b-2`,children:"en"===e.locale?"English":"العربية"},e.locale))})}),d.translations.map(e=>(0,a.jsxs)("div",{className:`transition-opacity duration-200 ${R===e.locale?"block":"hidden"}`,dir:e.dir,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{htmlFor:`title-${e.locale}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ","en"===e.locale?"*":""]}),(0,a.jsx)("input",{type:"text",id:`title-${e.locale}`,value:e.title,onChange:t=>et(e.locale,"title",t.target.value),className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",required:"en"===e.locale,dir:e.dir})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{htmlFor:`slug-${e.locale}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Slug ","en"===e.locale?"*":""]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"text",id:`slug-${e.locale}`,value:e.slug,onChange:t=>et(e.locale,"slug",t.target.value),className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",required:"en"===e.locale,dir:"ltr"}),(0,a.jsx)("button",{type:"button",onClick:()=>es(e.locale),className:"ml-2 px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Generate"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:`summary-${e.locale}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"Summary"}),(0,a.jsx)("textarea",{id:`summary-${e.locale}`,value:e.summary,onChange:t=>et(e.locale,"summary",t.target.value),rows:3,className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white",dir:e.dir})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{htmlFor:`content-${e.locale}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Content ","en"===e.locale?"*":""]}),(0,a.jsx)(f,{value:e.content,onChange:t=>et(e.locale,"content",t),placeholder:"Write your post content here...",locale:e.locale})]})]},e.locale))]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-md shadow border border-gray-200",children:[(0,a.jsxs)("button",{type:"button",className:"flex justify-between items-center w-full text-left px-2 py-3",onClick:()=>X("media"),children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Featured Image"}),K.media?(0,a.jsx)(g.A,{className:"h-5 w-5 text-gray-500"}):(0,a.jsx)(h,{className:"h-5 w-5 text-gray-500"})]}),K.media&&(0,a.jsxs)("div",{className:"mt-4 space-y-6 border-t border-gray-200 pt-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Upload an image to represent this post. This image will be used in listings and social media shares."}),(H.length>0||Y)&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Selected Media"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:H.map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"aspect-video bg-gray-100 rounded-md overflow-hidden shadow-md hover:shadow-lg transition-all",children:(0,a.jsx)("img",{src:e.url,alt:e.altText||"Media item",className:"w-full h-full object-cover"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,a.jsx)("button",{type:"button",className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-colors",onClick:()=>ec(e.id),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,a.jsx)("div",{className:"absolute bottom-1 left-1 right-1 text-xs bg-black bg-opacity-50 text-white p-1 rounded truncate",children:e.title||"Untitled"})]},e.id))})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image"}),(0,a.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:bg-gray-50 transition-colors cursor-pointer",children:(0,a.jsxs)("div",{className:"space-y-1 text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,a.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,a.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[(0,a.jsx)("span",{children:"Upload a file"}),(0,a.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files.length>0){let t=Array.from(e.target.files);$(e=>[...e,...t])}}})]}),(0,a.jsx)("p",{className:"pl-1",children:"or drag and drop"}),(0,a.jsx)("button",{type:"button",onClick:()=>J(!0),className:"pl-1 text-indigo-600 hover:text-indigo-500",children:"or choose from gallery"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),W.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Files to Upload"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:W.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"aspect-video bg-gray-100 rounded-md overflow-hidden shadow-md",children:(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-full object-cover"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,a.jsx)("button",{type:"button",className:"bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-colors",onClick:()=>en(t),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,a.jsx)("div",{className:"absolute bottom-1 left-1 right-1 text-xs bg-black bg-opacity-50 text-white p-1 rounded truncate",children:e.name})]},t))})]}),W.length>0&&(0,a.jsx)("button",{type:"button",onClick:ed,disabled:G,className:"mt-3 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300 transition-colors",children:G?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Images"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-md shadow border border-gray-200",children:[(0,a.jsxs)("button",{type:"button",className:"flex justify-between items-center w-full text-left px-2 py-3",onClick:()=>X("metadata"),children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"SEO & Metadata"}),K.metadata?(0,a.jsx)(g.A,{className:"h-5 w-5 text-gray-500"}):(0,a.jsx)(h,{className:"h-5 w-5 text-gray-500"})]}),K.metadata&&(0,a.jsx)("div",{className:"mt-4 space-y-6 border-t border-gray-200 pt-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[U.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-center",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("input",{type:"text",value:e.key,onChange:e=>ea(t,"key",e.target.value),placeholder:"Meta key",className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"})}),(0,a.jsx)("div",{className:"md:col-span-3",children:(0,a.jsx)("input",{type:"text",value:e.value,onChange:e=>ea(t,"value",e.target.value),placeholder:"Meta value",className:"block w-full px-3 py-2 text-gray-700 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"})}),(0,a.jsx)("div",{className:"md:col-span-1 flex justify-end",children:(0,a.jsx)("button",{type:"button",onClick:()=>er(t),className:"inline-flex items-center p-1.5 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>{B([...U,{key:"",value:""}])},className:"mt-2 inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Metadata Field"})]})})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:I,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:I?"Saving...":t?"Update Post":"Create Post"})}),(0,a.jsx)(u,{isOpen:V,onClose:()=>J(!1),onSelect:e=>{Z(e),J(!1),H.some(t=>t.id===e.id)||z(t=>[...t,e])},selectedId:Y?.id})]})}},78483:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(58009);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))})},87327:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(58009);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})}};