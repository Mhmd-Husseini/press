"use strict";exports.id=1244,exports.ids=[1244],exports.modules={69820:(e,r,s)=>{s.r(r),s.d(r,{"007ef74b69aebf12238ea651195ddc937e58ae17f8":()=>a.HW,"00d4248e5cc13d9a24c27da7f63c4e748a633f8d0d":()=>a.ri,"4050a74c93af136bf3a3faa21dd4a4d846bc6cf489":()=>a.kz,"408e655556292a0a94341763d8193fda605da02beb":()=>a.iD});var a=s(90119)},22511:(e,r,s)=>{s.d(r,{default:()=>o});var a=s(45512),t=s(58009),n=s.n(t),i=s(28531),l=s.n(i),d=s(38447);function o({title:e,description:r,buttonText:s,buttonHref:t,buttonPermission:i,buttonAction:o,actions:c}){let m=s&&(t||o),u=e=>{let r="ml-3 inline-flex items-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2";switch(e){case"secondary":return`${r} border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-indigo-500`;case"danger":return`${r} border-transparent bg-red-600 text-white hover:bg-red-700 focus:ring-red-500`;default:return`${r} border-transparent bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500`}},x=(0,a.jsx)("button",{onClick:o,className:u(),children:s}),g=(0,a.jsx)(l(),{href:t||"#",className:u(),children:s});return(0,a.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:e}),r&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]}),(0,a.jsxs)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:[m&&i?(0,a.jsx)(d.A,{permissions:i,children:t?g:x}):m&&(t?g:x),c&&c.map((e,r)=>{let s=(0,a.jsx)(n().Fragment,{children:e.href?(0,a.jsxs)(l(),{href:e.href,className:u(e.variant),children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]}):(0,a.jsxs)("button",{onClick:e.onClick,className:u(e.variant),children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]})},r);return e.permission?(0,a.jsx)(d.A,{permissions:e.permission,children:s},r):s})]})]})}},79932:(e,r,s)=>{s.d(r,{A:()=>l});var a=s(45512),t=s(58009),n=s(79334);function i({category:e,isEdit:r=!1}){let s=(0,n.useRouter)();(0,n.useSearchParams)().get("parent");let[i,l]=(0,t.useState)({parentId:null,translations:[{locale:"en",name:"",description:"",slug:"",dir:"ltr"},{locale:"ar",name:"",description:"",slug:"",dir:"rtl"}]}),[d,o]=(0,t.useState)([]),[c,m]=(0,t.useState)(!1),[u,x]=(0,t.useState)(null),[g,h]=(0,t.useState)("en"),b=(e,r,s)=>{l(a=>{let t=a.translations.map(a=>a.locale===e?{...a,[r]:s}:a);return{...a,translations:t}})},f=e=>{let r=i.translations.find(r=>r.locale===e);r&&r.name&&b(e,"slug",r.name.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-"))},p=async a=>{a.preventDefault(),m(!0),x(null);try{let a=i.translations.filter(e=>""!==e.name.trim());if(0===a.length)throw Error("At least one translation with a name is required");let t={...i,translations:a},n=r&&e?`/api/admin/categories/${e.id}`:"/api/admin/categories",l=await fetch(n,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to save category")}s.push("/admin/categories")}catch(e){x(e.message||"An error occurred while saving the category"),m(!1)}},j=e=>i.translations.find(r=>r.locale===e)||{locale:e,name:"",description:"",slug:"",dir:"ar"===e?"rtl":"ltr"};return j(g),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-6 bg-white p-6 rounded-md shadow-sm",children:[u&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:u})})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"parent",className:"block text-sm font-medium text-gray-700",children:"Parent Category"}),(0,a.jsxs)("select",{id:"parent",name:"parent",value:i.parentId||"none",onChange:e=>{let r="none"===e.target.value?null:e.target.value;l(e=>({...e,parentId:r}))},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[(0,a.jsx)("option",{value:"none",children:"None (Top Level)"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.translations[0]?.name||"Unnamed Category"},e.id))]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-4","aria-label":"Translations",children:[(0,a.jsx)("button",{type:"button",onClick:()=>h("en"),className:`${"en"===g?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm`,children:"English"}),(0,a.jsx)("button",{type:"button",onClick:()=>h("ar"),className:`${"ar"===g?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm`,children:"العربية (Arabic)"})]})}),(0,a.jsx)("div",{className:"en"===g?"":"hidden",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name-en",className:"block text-sm font-medium text-gray-700",children:"Name (English) *"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",id:"name-en",value:j("en").name,onChange:e=>b("en","name",e.target.value),onBlur:()=>f("en"),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"slug-en",className:"block text-sm font-medium text-gray-700",children:"Slug (English) *"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",id:"slug-en",value:j("en").slug,onChange:e=>b("en","slug",e.target.value),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Used in URLs. Click out of the name field to auto-generate."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description-en",className:"block text-sm font-medium text-gray-700",children:"Description (English)"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("textarea",{id:"description-en",rows:3,value:j("en").description||"",onChange:e=>b("en","description",e.target.value),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]})]})}),(0,a.jsx)("div",{className:"ar"===g?"":"hidden",dir:"rtl",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name-ar",className:"block text-sm font-medium text-gray-700",children:"الاسم (Arabic)"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",id:"name-ar",value:j("ar").name,onChange:e=>b("ar","name",e.target.value),onBlur:()=>f("ar"),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"slug-ar",className:"block text-sm font-medium text-gray-700",children:"الرابط (Slug)"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",id:"slug-ar",value:j("ar").slug,onChange:e=>b("ar","slug",e.target.value),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"})}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"يستخدم في عناوين URL. انقر خارج حقل الاسم للإنشاء التلقائي."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description-ar",className:"block text-sm font-medium text-gray-700",children:"الوصف (Description)"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("textarea",{id:"description-ar",rows:3,value:j("ar").description||"",onChange:e=>b("ar","description",e.target.value),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]})]})}),(0,a.jsxs)("div",{className:"flex justify-end",dir:"ltr",children:[(0,a.jsx)("button",{type:"button",onClick:()=>s.push("/admin/categories"),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:c?"Saving...":r?"Update Category":"Create Category"})]})]})}function l(e){let[r,s]=(0,t.useState)(!1);return r?(0,a.jsx)(i,{...e}):(0,a.jsx)("div",{children:"Loading form..."})}},84824:(e,r,s)=>{s.d(r,{A:()=>n});var a=s(45512);s(58009);var t=s(20438);function n({roles:e,type:r="any",fallback:s=null,children:n}){let{user:i,loading:l}=(0,t.A)(),d=Array.isArray(e)?e:[e];return l?null:i&&i.roles?("all"===r?d.every(e=>i.roles.includes(e)):d.some(e=>i.roles.includes(e)))?(0,a.jsx)(a.Fragment,{children:n}):(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(a.Fragment,{children:s})}}};