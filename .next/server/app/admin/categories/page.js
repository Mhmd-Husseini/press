(()=>{var e={};e.id=6631,e.ids=[6631],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},67823:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(70260),a=r(28203),n=r(25155),i=r.n(n),l=r(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["admin",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,30244)),"D:\\press\\src\\app\\admin\\categories\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85798)),"D:\\press\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"D:\\press\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\press\\src\\app\\admin\\categories\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/categories/page",pathname:"/admin/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},69820:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"007ef74b69aebf12238ea651195ddc937e58ae17f8":()=>s.HW,"00d4248e5cc13d9a24c27da7f63c4e748a633f8d0d":()=>s.ri,"4050a74c93af136bf3a3faa21dd4a4d846bc6cf489":()=>s.kz,"408e655556292a0a94341763d8193fda605da02beb":()=>s.iD});var s=r(90119)},37684:(e,t,r)=>{Promise.resolve().then(r.bind(r,46789))},13716:(e,t,r)=>{Promise.resolve().then(r.bind(r,80393))},80393:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(45512),a=r(58009),n=r(79334),i=r(28531),l=r.n(i),o=r(84183),d=r(84824);function c(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[r,i]=(0,a.useState)([]),[c,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null),[g,p]=(0,a.useState)({page:1,limit:10,total:0,pages:0}),[h,b]=(0,a.useState)(null),f=parseInt(t.get("page")||"1"),y=parseInt(t.get("limit")||"10"),v=t.get("search")||"",j=t.get("locale")||"en",w=async()=>{try{m(!0),u(null);let e=new URLSearchParams({page:f.toString(),limit:y.toString(),locale:j,...v&&{search:v}}),t=await fetch(`/api/admin/categories?${e}`);if(t.ok){let e=await t.json();i(e.categories),p({page:e.page,limit:e.limit,total:e.total,pages:e.pages})}else throw Error("Failed to fetch categories")}catch(e){console.error("Error fetching categories:",e),u("Failed to load categories. Please try again.")}finally{m(!1)}},N=async e=>{try{let t=await fetch(`/api/admin/categories/${e}`,{method:"DELETE"});if(t.ok)w(),b(null);else{let e=await t.json();alert(e.error||"Failed to delete category")}}catch(e){console.error("Error deleting category:",e),alert("Failed to delete category")}},k=e=>{let t=e.translations.find(e=>e.locale===j)||e.translations[0];return t?.name||"Unnamed Category"},C=e=>{let t=e.translations.find(e=>e.locale===j)||e.translations[0];return t?.description||""},S=e=>{let t=e.translations.find(e=>e.locale===j)||e.translations[0];return t?.slug||""},E=[{key:"translations",label:"Category",sortable:!0,render:(e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:k(t)}),C(t)&&(0,s.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:C(t)}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["Slug: ",S(t)]})]})},{key:"parent",label:"Parent",render:(e,t)=>(0,s.jsx)("span",{className:"text-sm text-gray-600",children:t.parent?k(t.parent):"-"})},{key:"_count",label:"Posts",render:(e,t)=>(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t._count?.posts||0," posts"]})},{key:"order",label:"Order",sortable:!0,render:e=>(0,s.jsx)("span",{className:"text-sm text-gray-900",children:e})},{key:"createdAt",label:"Created",sortable:!0,render:e=>(0,s.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e).toLocaleDateString()})},{key:"id",label:"Actions",className:"text-right",render:(e,t)=>(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(l(),{href:`/admin/categories/${t.id}`,className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"View"}),(0,s.jsxs)(d.A,{roles:["SUPER_ADMIN","EDITOR_IN_CHIEF","EDITORIAL"],children:[(0,s.jsx)(l(),{href:`/admin/categories/${t.id}/edit`,className:"text-indigo-600 hover:text-indigo-900 text-sm font-medium",children:"Edit"}),(!t.children||0===t.children.length)&&(!t._count?.posts||0===t._count.posts)&&(0,s.jsx)("button",{onClick:()=>b(t.id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Delete"})]})]})}],P=(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-8 rounded-lg text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Access Denied"}),(0,s.jsx)("p",{className:"mt-2",children:"You don't have permission to view categories."}),(0,s.jsx)(l(),{href:"/admin",className:"mt-4 inline-block text-blue-600 hover:underline",children:"Return to Admin Dashboard"})]});return(0,s.jsx)(d.A,{roles:["SUPER_ADMIN","EDITOR_IN_CHIEF","EDITORIAL","SENIOR_EDITOR","EDITOR"],fallback:P,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Categories"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your content categories and hierarchy"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("select",{value:j,onChange:r=>{let s=new URLSearchParams(t);s.set("locale",r.target.value),s.set("page","1"),e.push(`/admin/categories?${s.toString()}`)},className:"border border-gray-300 rounded-md text-sm px-2 py-1 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,s.jsx)("option",{value:"en",children:"English"}),(0,s.jsx)("option",{value:"ar",children:"العربية"})]}),(0,s.jsx)(d.A,{roles:["SUPER_ADMIN","EDITOR_IN_CHIEF","EDITORIAL"],children:(0,s.jsx)(l(),{href:"/admin/categories/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Category"})})]})]}),x&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:x}),(0,s.jsx)(o.b,{columns:E,data:r,total:g.total,page:g.page,limit:g.limit,onPageChange:r=>{let s=new URLSearchParams(t);s.set("page",r.toString()),e.push(`/admin/categories?${s.toString()}`)},onLimitChange:r=>{let s=new URLSearchParams(t);s.set("limit",r.toString()),s.set("page","1"),e.push(`/admin/categories?${s.toString()}`)},onSearch:r=>{let s=new URLSearchParams(t);r?s.set("search",r):s.delete("search"),s.set("page","1"),e.push(`/admin/categories?${s.toString()}`)},loading:c,searchPlaceholder:"Search categories by name, description, or slug..."}),h&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,s.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,s.jsxs)("div",{className:"mt-3 text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Category"}),(0,s.jsx)("div",{className:"mt-2 px-7 py-3",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this category? This action cannot be undone."})}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,s.jsx)("button",{onClick:()=>b(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>N(h),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})})]})})}},84824:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(45512);r(58009);var a=r(20438);function n({roles:e,type:t="any",fallback:r=null,children:n}){let{user:i,loading:l}=(0,a.A)(),o=Array.isArray(e)?e:[e];return l?null:i&&i.roles?("all"===t?o.every(e=>i.roles.includes(e)):o.some(e=>i.roles.includes(e)))?(0,s.jsx)(s.Fragment,{children:n}):(0,s.jsx)(s.Fragment,{children:r}):(0,s.jsx)(s.Fragment,{children:r})}},84183:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var s=r(45512),a=r(58009),n=r(87327);let i=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))});var l=r(78483);function o({columns:e,data:t,total:r,page:o,limit:d,onPageChange:c,onLimitChange:m,onSort:x,onSearch:u,onFilter:g,loading:p=!1,searchPlaceholder:h="Search..."}){let[b,f]=(0,a.useState)(null),[y,v]=(0,a.useState)("asc"),[j,w]=(0,a.useState)(""),N=e=>{let t=b===e&&"asc"===y?"desc":"asc";f(e),v(t),x?.(e,t)},k=e=>{w(e),u?.(e)},C=Math.ceil(r/d),S=Math.min(o*d,r);return(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[u&&(0,s.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"relative max-w-md",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(n.A,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{type:"text",placeholder:h,value:j,onChange:e=>k(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsx)("tr",{children:e.map(e=>(0,s.jsx)("th",{onClick:()=>e.sortable&&N(e.key),className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${e.sortable?"cursor-pointer hover:bg-gray-100":""} ${e.className||""}`,children:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{children:e.label}),e.sortable&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(i,{className:`h-3 w-3 ${b===e.key&&"asc"===y?"text-indigo-600":"text-gray-300"}`}),(0,s.jsx)(l.A,{className:`h-3 w-3 -mt-1 ${b===e.key&&"desc"===y?"text-indigo-600":"text-gray-300"}`})]})]})},String(e.key)))})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:e.length,className:"px-6 py-12 text-center",children:(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})})}):0===t.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:e.length,className:"px-6 py-12 text-center text-gray-500",children:"No data found"})}):t.map((t,r)=>(0,s.jsx)("tr",{className:"hover:bg-gray-50",children:e.map(e=>(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.render?e.render(t[e.key],t):String(t[e.key]||"")},String(e.key)))},r))})]})}),(0,s.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,s.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,s.jsx)("button",{onClick:()=>c(o-1),disabled:o<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>c(o+1),disabled:o>=C,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,s.jsx)("span",{className:"font-medium",children:(o-1)*d+1})," to"," ",(0,s.jsx)("span",{className:"font-medium",children:S})," of"," ",(0,s.jsx)("span",{className:"font-medium",children:r})," results"]}),(0,s.jsxs)("select",{value:d,onChange:e=>m(Number(e.target.value)),className:"border border-gray-300 rounded-md text-sm px-2 py-1 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,s.jsx)("option",{value:10,children:"10 per page"}),(0,s.jsx)("option",{value:25,children:"25 per page"}),(0,s.jsx)("option",{value:50,children:"50 per page"}),(0,s.jsx)("option",{value:100,children:"100 per page"})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,s.jsx)("button",{onClick:()=>c(o-1),disabled:o<=1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),C>1&&(()=>{let e=[],t=[];for(let t=Math.max(2,o-2);t<=Math.min(C-1,o+2);t++)e.push(t);return o-2>2?t.push(1,"..."):t.push(1),t.push(...e),o+2<C-1?t.push("...",C):t.push(C),t})().map((e,t)=>"..."===e?(0,s.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},t):(0,s.jsx)("button",{onClick:()=>c(e),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${o===e?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:e},t)),(0,s.jsx)("button",{onClick:()=>c(o+1),disabled:o>=C,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]})}},46789:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\press\\\\src\\\\app\\\\admin\\\\categories\\\\CategoryManagementClient.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\press\\src\\app\\admin\\categories\\CategoryManagementClient.tsx","default")},30244:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var s=r(62740),a=r(76301),n=r(46789);let i={title:"Categories Management | Admin Panel"};function l(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading categories..."}),children:(0,s.jsx)(n.default,{})})}},78483:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(58009);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))})},87327:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(58009);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,6154,3928,2367,4549,574],()=>r(67823));module.exports=s})();